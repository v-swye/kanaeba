<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/kanaeba/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/kanaeba/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/kanaeba/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/kanaeba/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/kanaeba/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/kanaeba/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/kanaeba/',
    scheme: 'Pisces',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
<meta name="keywords" content="Economics, Data, Python, MATLAB, Analytics, Asia, Games, UrbanLife">
<meta property="og:type" content="website">
<meta property="og:title" content="Kanaeba&#39;s Long Position">
<meta property="og:url" content="https://v-swye.github.io/kanaeba/index.html">
<meta property="og:site_name" content="Kanaeba&#39;s Long Position">
<meta property="og:description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kanaeba&#39;s Long Position">
<meta name="twitter:description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">





  
  
  <link rel="canonical" href="https://v-swye.github.io/kanaeba/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Kanaeba's Long Position</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/kanaeba/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Kanaeba's Long Position</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Life is short, so be sure to go long.</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/kanaeba/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/kanaeba/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/kanaeba/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/kanaeba/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/27/Python读取目录下所有文件名及数据文件的分块处理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/27/Python读取目录下所有文件名及数据文件的分块处理/" class="post-title-link" itemprop="url">Python读取目录下所有文件名及数据文件的分块处理</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-27 09:23:27 / Modified: 09:26:01" itemprop="dateCreated datePublished" datetime="2019-05-27T09:23:27+08:00">2019-05-27</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/编程与技术/" itemprop="url" rel="index"><span itemprop="name">编程与技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="自动循环读取指定目录下的文件"><a href="#自动循环读取指定目录下的文件" class="headerlink" title="自动循环读取指定目录下的文件"></a>自动循环读取指定目录下的文件</h2><p>读取文件目录的关键是使用<code>os.listdir(path)</code>获得所有文件名称（组成的列表），然后可以写循环。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">path = <span class="string">""</span></span><br><span class="line">files = os.listdir(path)</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    <span class="comment">#some processes</span></span><br></pre></td></tr></table></figure></p>
<p>注意这里file只包括文件名，不包括原有绝对路径path，如果要处理文件，要加上<code>path+&#39;/&#39;+file</code>。<br>有时文件夹下面还有文件夹，此时可以使用<code>os.path.isdir(path)</code>来检查是不是文件夹，是文件时返回True。</p>
<h2 id="分块读取处理"><a href="#分块读取处理" class="headerlink" title="分块读取处理"></a>分块读取处理</h2><p>下面介绍使用iterator分块读取、处理文件的文法，当在read_csv()函数中传入<code>iterator = True</code>时，需要配合后续<code>obj.get_chunk(size)</code>方法；另一方面可以直接传入<code>chunk_size = N</code>来直接得到生成器。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">f = open(path, encoding=encoding, errors=<span class="string">'replace'</span>) </span><br><span class="line">reader = pd.read_csv(f, low_memory = <span class="literal">False</span>, error_bad_lines=<span class="literal">False</span>, iterator = <span class="literal">True</span>)</span><br><span class="line">data = pd.DataFrame()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    chunk = reader.get_chunk(<span class="number">100</span>*<span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">while</span> len(chunk) &gt; <span class="number">0</span>:</span><br><span class="line">        data = chunk</span><br><span class="line">        <span class="comment"># some data processing...</span></span><br><span class="line">        chunk = reader.get_chunk(<span class="number">100</span>*<span class="number">1000</span>) </span><br><span class="line">        print(<span class="string">'读取并处理10万条数据'</span>)</span><br><span class="line">        sys.stdout.flush() <span class="comment">#这句代码的意思是刷新输出，不加这句在Linux系统上要等程序执行完毕才会把print的内容一次性刷新出来</span></span><br><span class="line"><span class="keyword">except</span> (StopIteration, KeyboardInterrupt):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/27/Econ-Espresso-19M5W4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/27/Econ-Espresso-19M5W4/" class="post-title-link" itemprop="url">Econ Espresso 19M5W4</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-27 08:41:21 / Modified: 08:51:20" itemprop="dateCreated datePublished" datetime="2019-05-27T08:41:21+08:00">2019-05-27</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/时事简报/" itemprop="url" rel="index"><span itemprop="name">时事简报</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="The-Economist-Espresso"><a href="#The-Economist-Espresso" class="headerlink" title="The Economist Espresso"></a>The Economist Espresso</h2><h3 id="医疗健康：World-Health-Assembly（世界健康会议）"><a href="#医疗健康：World-Health-Assembly（世界健康会议）" class="headerlink" title="医疗健康：World Health Assembly（世界健康会议）"></a>医疗健康：World Health Assembly（世界健康会议）</h3><p>最近八天，World Health Assembly将在日内瓦举行，该会议将指引WHO的政策方向。会议议程包括全球健康、抗生素抗药性、气候变化和最近在刚果肆虐的埃博拉病毒问题。但最为热议的依然是药品价格过高的问题。意大利的决议草稿提议要求各国公布在医药上支付的真实价格，以及公开制药的生产和研究成本，和制药公司获得的公共融资支持。但一些拥有大型医药行业的国家——例如英国和德国——并不赞同这一提案。</p>
<h2 id="The-Economist"><a href="#The-Economist" class="headerlink" title="The Economist"></a>The Economist</h2><h3 id="即时买家改变房屋买卖方交易行为"><a href="#即时买家改变房屋买卖方交易行为" class="headerlink" title="即时买家改变房屋买卖方交易行为"></a>即时买家改变房屋买卖方交易行为</h3><p>标准化的资产很容易产生交易市场——比如石油，或者蓝筹股（blue-chip shares）。相比之下，债券的流动性往往要靠银行等中介来提供，因为债券往往有不同的息票率，不同的到期年限。资产越具有异质性的交易市场就越需要中介商的存在，中介难度越高，但从中获利的空间也就越大。比如，房地产就是这样的例子——没有两套房子可以完全一样。<br>即时买家商业模式的出现已经获得了初步成功（instant buyers）。类似公司债市场的银行，房地产的某些中介商开始利用复杂的数据和算法来计算一个合理的价位，然后向卖方报价（当然，因为中介承诺会以这个价格立刻购买，这对卖方来说具有足够的吸引力，所以该报价往往是at discount）。美国最大的在线房地产市场提供商Zillow凭借这一业务，在2019年Q1获得了51%的同比收益增长，其股票也大增。</p>
<h3 id="制裁下的生意经——风险与机会"><a href="#制裁下的生意经——风险与机会" class="headerlink" title="制裁下的生意经——风险与机会"></a>制裁下的生意经——风险与机会</h3><p>美国对国家实施的制裁正在创造新的盈利机会——特别是在能源行业。比如，可以从中获利的对冲基金、交易员或分析师会帮助相关国家（例如，伊朗）将石油运到海中，然后经过数据改造和处理转移到另外的运输船上销售出去。<br>与之相对，现在也有公司专门负责搞“红客”任务：通过大数据等方法分析可疑船只，帮政府、保险公司等找搞事情的船只。<br>（人类的智慧在利益面前真是无与伦比的机智）</p>
<h3 id="从树叶寻找黄金"><a href="#从树叶寻找黄金" class="headerlink" title="从树叶寻找黄金"></a>从树叶寻找黄金</h3><p>澳洲这一技术已经得到商业化的可能：探测树叶中的金元素含量以推测地下是否埋有金矿，这比过去钻地很多公里却徒劳无获带来的成本吸引人的多。</p>
<h3 id="成熟商业周期中投资的乐与悲"><a href="#成熟商业周期中投资的乐与悲" class="headerlink" title="成熟商业周期中投资的乐与悲"></a>成熟商业周期中投资的乐与悲</h3><p>后周期（”late cycle” market conditions）：在漫长经济扩张之后，经济疲软已耗尽、资产价格处于高位的市场情况。<br>所谓late cycle，是处于两种状态中间的情景。一方面，它承认现在正是好时候，经济增长，工作岗位增多，一片欣欣向荣。另一方面，它又担心（或者说意识到）衰退也不远了。比如，由于加息或者贸易战升级。<br>late cycle market的一个特征是，高风险资产的价格有一个上升的趋势，但对衰退的担忧使其时不时遭遇sell-off，形成push-and-pull dynamic。</p>
<h3 id="贸易战下中国从日本历史寻求启示"><a href="#贸易战下中国从日本历史寻求启示" class="headerlink" title="贸易战下中国从日本历史寻求启示"></a>贸易战下中国从日本历史寻求启示</h3><p><strong>1985年广场协议</strong>：在美国施压下日本通过日元升值解决贸易冲突，一年内日元兑美元汇率飙升50%。除了美国、日本之外，英国、法国和西德也是广场协议的一员。<br>从农业到电子行业，美国指责日本盗窃知识产权，并试图掌控未来工业。美国希望日本，同时现在希望中国，改善竞争法规制，对外国投资者更加开放，削弱自身大型企业的力量（日本的“系列”集团，和中国的国企）。<br>今日贸易战：仅中美双方，且汇率问题只是冲突中很小的一部分。</p>
<p>广场协议的后果：日本为应对日元升值、出口急剧下降的问题，同时开放了货币政策和财政政策刺激，暂时促进了经济增长，但同时形成了资产泡沫，1990年泡沫破灭后——失去的十年。截止写稿日，日本股票的名义价格依然只是1989年最高峰值的60%。不过，这种泡沫不能说完全是美国的锅，一部分责任也归于过度补偿出口下降的日本刺激政策：广场协议签署18个月内利率从5%下降到2.5%，同时增加政府支出，减少税收。</p>
<h2 id="路透中文网"><a href="#路透中文网" class="headerlink" title="路透中文网"></a>路透中文网</h2><h3 id="美对伊朗制裁刺激欧盟寻求欧元地位"><a href="#美对伊朗制裁刺激欧盟寻求欧元地位" class="headerlink" title="美对伊朗制裁刺激欧盟寻求欧元地位"></a>美对伊朗制裁刺激欧盟寻求欧元地位</h3><p>欧盟主要官员表示，欧盟正寻找新的办法来扩大欧元使用范围，对抗美元的全球主导地位。欧盟试图藉由帮助企业绕过美国制裁来挽救伊核协议。此前，由于担心制裁冲击，欧洲企业在去年美国退出伊核协议后暂停了与伊朗的业务往来，以防波及自身在美国的经营业务。<br>外汇储备、主权债券发行和企业国际贷款中，美元约占60%，欧元仅20%。<br>在推动欧元即时支付方面，主要阻力来自各国银行体系并不愿意配合。另一方面，欧盟希望依赖自己全球主要油气进口买家的地位，在能源市场上推进欧元交易，这一点可能会获得俄罗斯支持——俄罗斯一直想寻求美元以外合约的缔结机会。</p>
<h2 id="WSJ-City"><a href="#WSJ-City" class="headerlink" title="WSJ City"></a>WSJ City</h2><h3 id="中美贸易紧张下大公司缩减工厂、设备和资本物品投资"><a href="#中美贸易紧张下大公司缩减工厂、设备和资本物品投资" class="headerlink" title="中美贸易紧张下大公司缩减工厂、设备和资本物品投资"></a>中美贸易紧张下大公司缩减工厂、设备和资本物品投资</h3><p>2019年Q1美国大型上市公司基本下调固定资产投资，部分公司高管指出贸易不确定性使其在投资决策方面持谨慎态度。这可能进一步影响19-20年的经济增长。</p>
<h3 id="华为手机在日英销售受阻"><a href="#华为手机在日英销售受阻" class="headerlink" title="华为手机在日英销售受阻"></a>华为手机在日英销售受阻</h3><p>受贸易战影响，日本和英国的手机运营商已暂停华为手机上市（考虑到谷歌等的做法可能使其无法正常工作）</p>
<h3 id="全球央行不应学习日本央行的股市行为"><a href="#全球央行不应学习日本央行的股市行为" class="headerlink" title="全球央行不应学习日本央行的股市行为"></a>全球央行不应学习日本央行的股市行为</h3><p>日本央行以大量政府债券购买试图刺激经济体而闻名。但其股市调控结果却不尽人意。日本央行已经购入了该国超过3/4的ETF，目标是降低权益风险溢价，提升股价并降低企业的股权融资成本，但日本6.94%的风险溢价与美国5.96%之间的差距已经稳定了6年。该调控政策也未能吸引海外投资者购买日本越来越便宜的股票。<br>与终有一天会到期的债券不同，在售出之前，央行持有的股票永远属于央行。这导致股票市场出现一定程度的扭曲：估值不再单纯靠传统分析方法，而同时要考虑央行政策发生变动的可能性。</p>
<h3 id="纽交所下调上市手续费"><a href="#纽交所下调上市手续费" class="headerlink" title="纽交所下调上市手续费"></a>纽交所下调上市手续费</h3><p>纽交所下调生物科技公司的上市手续费，以从过去更低费用的纳斯达克吸引该类IPO。这一行为体现了两家交易所近年来逐渐白热化的竞争趋势。</p>
<h3 id="日本第一季度GDP上涨"><a href="#日本第一季度GDP上涨" class="headerlink" title="日本第一季度GDP上涨"></a>日本第一季度GDP上涨</h3><p>2019Q1日本第一季度GDP年化同比上涨2.1%，但主要归因于大幅下降的进口——其下降幅度超过了出口的下降幅度（没错，出口也在下降），使其净出口上升，GDP得以上升。因此这不见得是个好兆头，特别是考虑到十月可能发生的消费税上调。</p>
<h3 id="美国独角兽公司难寻CFO"><a href="#美国独角兽公司难寻CFO" class="headerlink" title="美国独角兽公司难寻CFO"></a>美国独角兽公司难寻CFO</h3><p>硅谷的新兴科技并不能解决找不到合格CFO的问题。随着初创公司逐渐成长为大型、复杂的公司，它们开始面临合格财务管理候选人人才紧缺的困境。<br>成功的候选人必须要有处理投资者和债权人的经验，带领过公司上市，熟知科技公司监管规定和相关会计实务。在快速成长的公司工作，他们可能会经常熬夜加班。那些曾经伴随初创公司成长到估值$1bn以上的CFO并不像再回去一次。截止4月17日，美国180家初创公司中，71%都拥有了CFO，剩下的则必须在很少的候选人池里竞争。<br>经验丰富的CFO工资也得到了大幅增长。</p>
<h2 id="FT中文网"><a href="#FT中文网" class="headerlink" title="FT中文网"></a>FT中文网</h2><h3 id="从大数据看中国都市圈人口迁移"><a href="#从大数据看中国都市圈人口迁移" class="headerlink" title="从大数据看中国都市圈人口迁移"></a>从大数据看中国都市圈人口迁移</h3><p>截止2018年末，中国城镇常住人口已经达到8.3亿人，城镇化进展迅猛，但与70%均值的发达经济体仍有较大差距。<br>根据京东大数据，比对收货人收货信息和身份信息，2018年一线大城市的人口均净流出。<br>上海方面，迁入城市排名：北京、苏州、杭州、南通、南京；迁出：北京、苏州、杭州、南通。可见主要集中在长三角，城市集群已形成。<br>广州、深圳类似。迁入：北京、深圳、佛山、东莞、湛江、茂名等，迁出也在周边。城市集群在珠三角也已然出现。<br>相比来看，京津冀集群效应弱于珠三角和长三角，北京对全国辐射范围都很强（比如上海和广深圳州的第一迁入城市地位）。</p>
<h2 id="The-Guardian"><a href="#The-Guardian" class="headerlink" title="The Guardian"></a>The Guardian</h2><h3 id="Facebook计划2020年发行数字货币GlobalCoin"><a href="#Facebook计划2020年发行数字货币GlobalCoin" class="headerlink" title="Facebook计划2020年发行数字货币GlobalCoin"></a>Facebook计划2020年发行数字货币GlobalCoin</h3><p>Facebook计划在2020年初发行自己的数字货币以帮助用户实现电子支付。通过GlobalCoin，用户可以将美元及其他国际货币兑换成该数字货币，然后用该数字货币支付或转账——无需再通过传统的银行账户方式进行。<br>扎克伯格上个月已与英国央行governor探讨过相关计划。他同时在与美国财政部和相关转账公司讨论，以期开发便宜安全的货币收付系统。<br>数字货币的价值波动是值得关注的问题。为维护该货币的币值稳定，Facebook准备将其汇率盯住一篮子货币——包括美元，欧元和日元。<br>本月初，美国参议院（US Senate committee）已向该公司公开询问货币运作方式、消费者保护及数据安全问题。<br>今年2月，JP Morgan成为美国主要银行中第一家发行自己数字货币的银行：JPM Coin，可被客户用于支付结算。</p>
<h3 id="Amazon-Google-Uber效应如何影响通胀率"><a href="#Amazon-Google-Uber效应如何影响通胀率" class="headerlink" title="Amazon-Google-Uber效应如何影响通胀率"></a>Amazon-Google-Uber效应如何影响通胀率</h3><p>在当今低通胀的世界，零利率甚至负利率配合QE可能已经为整个金融系统的稳定埋下隐患，同时可能已经造成了资源错配。但是，投资者依然依赖于央行，而非持有一种审慎的态度。<br>为了重归2%通胀率的目标，国际主要的央行们几乎都以经济周期为基点寻找新的刺激通胀方法：总需求不足。但是，实际上降低通胀率的贡献者也有供给方。试想，美国六个月移动平均的工作机会创造已经超过了吸收新的劳动市场参与者所需历史水平的50%，失业率3.6%回到五十年最低水平，但劳动参与率依然只有62.8%（世界平均：62，中国：71），市场预期通货膨胀率也长期低于2%目标。<br>为了应对低通胀，各国央行几乎都采用了超低利率+QE手段，但这些工具的作用在消退，而且无法评估到底已经埋下了多少隐患。实际上，今天的低利率环境有一部分要归功于结构性的大变动：科技进步（AI，大数据，移动）。Amazon这类电商要以低价吸引消费者，Google通过降低消费者的搜寻成本从而降低了公司的要价能力（pricing power），而Uber则将已有的资产带到市场上，使相关公司的定价能力再次下降。<br>不过，随着劳动力市场供给逐渐趋于紧张，工业集中化，科技板块的公司可能会具有更高的定价能力。<br>回到现在的政治局势，民粹主义政治家宣称要用财政管理方式抑制资本势力、支持劳动力，同时向央行政治施压，要求提供更多的流动性。反全球化反贸易势力抬头，输入型通胀也是通胀。</p>
<blockquote>
<p>Focusing too much on the cyclical, rather than the structural, could pose serious risks to future economic wellbeing and financial stability. </p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/26/BLP学习笔记：随机系数对数模型估计需求函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/26/BLP学习笔记：随机系数对数模型估计需求函数/" class="post-title-link" itemprop="url">BLP学习笔记：随机系数对数模型估计需求函数</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-26 23:45:19" itemprop="dateCreated datePublished" datetime="2019-05-26T23:45:19+08:00">2019-05-26</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-05-27 08:43:06" itemprop="dateModified" datetime="2019-05-27T08:43:06+08:00">2019-05-27</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/经济学/" itemprop="url" rel="index"><span itemprop="name">经济学</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>reference: Nevo A. A practitioner’s guide to estimation of random‐coefficients logit models of demand[J]. Journal of economics &amp; management strategy, 2000, 9(4): 513-548.</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><h3 id="为什么要估计需求？"><a href="#为什么要估计需求？" class="headerlink" title="为什么要估计需求？"></a>为什么要估计需求？</h3><p>对于差异化产品行业而言，在以下分析场景中，需求函数的准确估计十分关键：</p>
<ul>
<li>单产品静态分析：市场势力（market power）</li>
<li>产品的减少：兼并（mergers）</li>
<li>产品的增加：<ul>
<li>新品牌估值（valuation of new brand）</li>
<li>创新（innovation）</li>
</ul>
</li>
</ul>
<h3 id="BLP方法的目标和优点"><a href="#BLP方法的目标和优点" class="headerlink" title="BLP方法的目标和优点"></a>BLP方法的目标和优点</h3><p>一般而言，个体层级（individual-level）的数据是最优的，但这类数据往往很难得到。通过BLP，我们可以使用市场层级的数据（market-level data）来估计需求。<br>与其他离散选择模型（discrete choice model）相比，BLP方法具有以下优点：</p>
<ol>
<li>保留其他离散选择模型具有的优点；</li>
<li>允许价格存在内生性；</li>
<li>有更符合现实情况的需求价格弹性（包括自价格和跨产品需求价格弹性）；</li>
<li>可以只使用市场层级的数据（同时在拥有个体层级数据时，该模型也可以很灵活地应对）。</li>
</ol>
<p>在估计需求时，最传统的方法是需求方程系统，但该系统：</p>
<ul>
<li>产品品类很多时，待估计参数太多（dimensionality problem）；</li>
<li>不考虑消费者taste的异质性（例如，常用的representative consumer approach）</li>
</ul>
<p>对于第一个维度问题（dimensionality），logit需求模型将各类产品映射到一个产品特征空间中，降低了需要估计的参数数量。但是，这类模型假设自变量是外生的，而价格往往与未观察到的变量之间具有相关性（例如，更高质量的产品价格会更高，但质量的衡量变量可能没有包括在原回归方程里），从而造成有偏估计。</p>
<h2 id="The-Model"><a href="#The-Model" class="headerlink" title="The Model"></a>The Model</h2><p>模型所需的数据：</p>
<ul>
<li>产品数据：市场层级的相关产品数量和价格数据；</li>
<li>个体数据：无需个体的购买决策信息，对个体特征数据可以基于已知分布/参数分布假设；</li>
<li>价格数据：当考虑内生性问题时，可以引入工具变量。</li>
</ul>
<h3 id="The-Setup"><a href="#The-Setup" class="headerlink" title="The Setup"></a>The Setup</h3><h4 id="定义市场"><a href="#定义市场" class="headerlink" title="定义市场"></a>定义市场</h4><p>市场的划分由想研究的问题和可得数据共同决定。下面是几个例子：</p>
<ul>
<li>本文：季度 t = 1~T的全国市场，共T个市场（类似time series）；</li>
<li>Nevo（2000）：（城市，季度）pairs构成的（城市数*季度数）个市场；</li>
<li>Das et al.（1994）：将消费者按收入水平划分为N个组，（消费者收入水平，年度）构成的（N*T）个市场</li>
</ul>
<h4 id="脚注解释"><a href="#脚注解释" class="headerlink" title="脚注解释"></a>脚注解释</h4><p>t = 1,2,3, … T个市场；<br>每个市场有 $i = 1,2,…,I_t$个消费者；<br>每个市场有$j = 1,2,…, J$个产品（为简化，这里假设每个市场提供相同的产品集，但这并非模型必须的假设）；<br>对t市场，可以观测到产品j的总量，平均价格以及对应的产品特征<strong>行</strong>向量$x_{jt}$。</p>
<h4 id="产品特征（product-characteristics）"><a href="#产品特征（product-characteristics）" class="headerlink" title="产品特征（product characteristics）"></a>产品特征（product characteristics）</h4><p>产品特征可以被进一步分为以下两部分：</p>
<ul>
<li>可被观测的：$x_{jt}$</li>
<li>不可观测的：记为$\xi_{jt}$，例如品牌声誉，没有观察到的促销活动，需求的系统性冲击等。不可观测的产品特征中，有时可以合理假设其中一部分并不随产品或所在市场改变（类似固定效应）。在这种情况下，不可观测产品特征可以写作$\xi_{jt} = \xi_j+\xi_t+\Delta\xi_{jt}$。</li>
</ul>
<h4 id="间接效用函数（indirect-utility-function）"><a href="#间接效用函数（indirect-utility-function）" class="headerlink" title="间接效用函数（indirect utility function）"></a>间接效用函数（indirect utility function）</h4><p>回顾高级微观经济学，间接效用函数指的是给定<strong>价格和收入</strong>后消费者做出最大化其效用的消费决策后，所得到的效用，通用函数形式为$v(p,y)$。<br>在BLP模型中，间接效用函数有以下形式：</p>
<script type="math/tex; mode=display">u_{ijt} = \alpha_i(y_i-p_{jt})+x_{jt}\beta_i+\xi_{jt}+\epsilon_{ijt}</script><p>其中，<br>$\alpha_i$衡量个体i的收入边际效用，该系数为常数的根本原因是效用函数是拟线性的，即没有财富效应。若要考虑财富效应也是很灵活的，只需引入$f(y_i-p_{jt})$，函数f的形式由效用函数决定，例如Cobb-Douglas效用函数下间接效用为$log(y_i-p_{jt})$ 的函数。<br>$\epsilon_{ijt}$为mean-zero stochastic term。<br>注意到我们假设$\xi_{jt}$与个体i无关。其背后隐含的经济学假设为，不可观测的产品特征只包括了垂直产品差异化（vertical product differentiation）的部分。根据垂直产品差异化的定义，这种产品特征对所有消费者而言是一样的。</p>
<blockquote>
<ul>
<li>vertical product differentiation：商品可以根据客观质量排序</li>
<li>horizontal product differentiation：在客观条件一样的情况下，根据消费者个人口味排序，例如对颜色的偏好</li>
</ul>
</blockquote>
<p>对于水平产品差异化的部分，我们通过$p_{jt}$的系数$a_i$随i变动来描述。<br>最后，注意到$p_{jt}$与i无关，这是因为我们假设所有消费者都面临相同的价格，但如果现实并不是这样，这种假设就会造成measurement error bias。例如，$corr(p_{jt},\epsilon_{ijt})!=0$时，这鼓励我们去找变量来IV价格变量。</p>
<h4 id="个体差异的随机系数假设"><a href="#个体差异的随机系数假设" class="headerlink" title="个体差异的随机系数假设"></a>个体差异的随机系数假设</h4><p>对于随机系数$\alpha_i$和$\beta_i$，假设它们由两部分组成：</p>
<script type="math/tex; mode=display">[\alpha_i,\beta_i] = [\alpha,\beta] + \Pi D_i+\Sigma v_i</script><p>其中，$[\alpha,\beta]$为均值，$D_i$为可观察到的人口学特征，例如收入、年龄、性别等，服从分布$D_i$~$\hat P_D^*(D)$，这里hat的原因是该分布既可以基于参数假设（例如正态分布），也可以基于大样本下估计得出。$v_i$为不可观察到的个体特征，比如该消费者是否有养狗，服从未知的总体分布$P_v^*(v)$，为unknown parametric distribution。例如，我们可以假设$v_i$服从多变量正态分布。<br>这里最重要的一点是利用了人口学特征可观测到的事实，减少了分布假设错误时带来的问题。最后，进一步假设$D_i$和$v_i$是相互独立的。</p>
<h4 id="Outside-Good"><a href="#Outside-Good" class="headerlink" title="Outside Good"></a>Outside Good</h4><p>不消费所代表的outside option，一般将其间接效用标准化归0。<br>为什么要加外部物品？如果不加该物品，那么假设所有内部产品的价格相对外部物品发生同样的变化，这样的变化并不会影响内部产品购买数量。比如，考虑汽车市场，如果我们不考察不买汽车的情况（比如，转而买自行车或者步行），那么汽车市场中所有汽车价格上升时，消费者不会改变自己买具体某个汽车型号的数量。但在现实生活中，假设价格上升到天价，则所有人都压根不会考虑买汽车。</p>
<h4 id="参数分类"><a href="#参数分类" class="headerlink" title="参数分类"></a>参数分类</h4><p>根据参数是否以线性方式进入间接效用函数，我们可以进一步将参数分为两类：线性参数与非线性参数。其中，线性参数$\theta_1 = [\alpha, \beta]$，非线性参数$\theta_2 = [\Pi, \Sigma]$<br>由BLP的间接效用函数形式及随机系数假设，可将间接效用函数进一步写为：</p>
<script type="math/tex; mode=display">u_{ijt} = \alpha_iy_i+\delta_{jt}(x_{jt},p_{jt},\xi_{jt};\theta_{1})+\mu_{ijt}(x_{jt},p_{jt},D_i,v_i;\theta_2 )+\epsilon_{ijt}</script><p>其中，</p>
<script type="math/tex; mode=display">\delta_{jt} = x_{jt}\beta-\alpha p_{jt}+\xi_{jt}</script><script type="math/tex; mode=display">\mu_{ijt} = [p_{jt}\ x_{jt}]_{1*(K+1)}[-\Pi D_i+\Sigma v_i]_{(K+1)*1}</script><p>注意我们这里没有把$\alpha_iy_i$归入后面两个参数部分，这是因为由于这部分对个体i是一样的，在后面计算时会被消掉。$\delta_{jt}$称为平均效用，它衡量了对所有消费者来说相同的部分。最后，$\mu_{ijt}+\epsilon_{ijt}$为均值为零的异质偏差，这一部分捕捉了系数的随机信息。</p>
<h4 id="消费者决策"><a href="#消费者决策" class="headerlink" title="消费者决策"></a>消费者决策</h4><p>我们假设消费者只购买对他来说质量最高的一种产品，并且只购买一单位（这一假设大多数情况合理——即使消费者会购买两辆车，但一般不会同时购买，在以时间区分的市场定义上该假设成立；不过，在假设确实不成立的时候，必须要么说明该模型只是一个真实模型的简约估计，要么另外针对多产品选择或连续产品建模）。基于这一假设，我们可以定义出在市场t中最终选择产品j的消费者所对应的个体特征集：</p>
<script type="math/tex; mode=display">A_{jt}(x_{·t},p_{·t},\xi_{·t};\theta_2 ) = \{(D_i,v_i,\epsilon_{i·t})|u_{ijt}>=u_{ikt},for\ all\ k =  0, 1,2,...,J\}</script><p>LHS注：$A_{jt}$为给定所有非线性参数的情况下，由市场t中产品的客观特征（包括已观测到的特征、价格和未观测到的的特征）决定的选择产品j的消费者集。产品的客观特征既影响平均效用，又影响异质性的偏差效用。<br>RHS注：这些消费者选择j的原因是，这些消费者i拥有的特征（包括人口特征，未观测的消费者特征，以及“白噪声”特征，这就是为什么下标都是i）使其选择j的间接效用是最高的。所有拥有这样个体特征的消费者构成了购买j的消费者集合。</p>
<h4 id="产品市场份额"><a href="#产品市场份额" class="headerlink" title="产品市场份额"></a>产品市场份额</h4><p>为什么要计算市场份额？这是因为市场份额就是我们要估计的需求数量，从而可以将估计值与真实观测值比较。<br>基于消费者集$A_{jt}$，如果我们知道个体特征的概率分布函数（或累积分布函数），就可以计算出每个产品的份额：</p>
<script type="math/tex; mode=display">s_{jt}(x_{·t},p_{·t},\xi_{·t};\theta_2 ) = \int_{A_{jt}}dP^{*}(D,v,\epsilon)</script><p>根据Bayes’ Rule，</p>
<script type="math/tex; mode=display">s_{jt}(x_{·t},p_{·t},\xi_{·t};\theta_2 ) = \int_{A_{jt}}dP^{*}(\epsilon|D,v)dP^{*}(v|D)dP^{*}(D)</script><p>由$\epsilon$~i.i.d及D和v相互独立的假设，</p>
<script type="math/tex; mode=display">s_{jt}(x_{·t},p_{·t},\xi_{·t};\theta_2 ) = \int_{A_{jt}}dP^{*}(\epsilon)dP(v)d\hat P^{*}(D)</script><p>$P^{*}(·)$为总体分布函数（population distribution function），而D的总体分布函数的帽子\^来源于D的分布可以由大样本数据估计。</p>
<h4 id="参数估计目标函数"><a href="#参数估计目标函数" class="headerlink" title="参数估计目标函数"></a>参数估计目标函数</h4><p>常用的目标函数为最小化估计值与观测值的距离，但该估计方法没有考虑价格和未观测到的产品特征之间的相关性。<br>在BLP中，使用GMM方法估计，具体见后文。</p>
<h3 id="分布假设"><a href="#分布假设" class="headerlink" title="分布假设"></a>分布假设</h3><p>对个体特征的分布假设会影响到市场份额的估计，从而影响需求-价格弹性（自价格和跨产品）及替代模式。下面给出几种分布假设。</p>
<h4 id="消费者异质性仅以误差项进入间接效用函数"><a href="#消费者异质性仅以误差项进入间接效用函数" class="headerlink" title="消费者异质性仅以误差项进入间接效用函数"></a>消费者异质性仅以误差项进入间接效用函数</h4><p>最简单的异质性来自假设消费者仅在误差项$\epsilon_{ijt}$上有差别。这种假设完全脱离了随机系数的分析框架。如果我们假设它独立同分布且服从一类极值分布，则该模型就完全回到了Logit模型的情况。在Logit模型中，需求价格弹性为：</p>
<script type="math/tex; mode=display">\eta_{jkt} = \frac{\partial{s_{jt}}p_{kt}}{\partial{p_{kt}}s_{jt}} = -\alpha p_{jt}(1-s_{jt}), j = k</script><script type="math/tex; mode=display">\eta_{jkt} = \frac{\partial{s_{jt}}p_{kt}}{\partial{p_{kt}}s_{jt}} = \alpha p_{kt}s_{kt}, j != k</script><p>Logit模型的需求价格弹性存在两个问题：</p>
<ul>
<li>j = k 时的自价格弹性：由于每个产品的市场份额一般很小，所以自价格弹性几乎和价格依系数$\alpha$负相关，价格下降时，自价格弹性的绝对值也下降，其倒数上升，以Lerner指数衡量的市场势力增加，这只有在便宜的产品其边际成本占价格的比例比高价商品还低的情况才有可能，但现实中不见得是这么一回事。而且，自价格弹性本身完全由间接效用函数中产品价格的函数形式决定，如果是log(price)形式，则自价格弹性会几近常数。</li>
<li>j ！= k 时的跨产品需求价格弹性：Logit模型广为人知的替代效应IIA问题，即假设B和C有相同的市场份额，则A价格上升时，原有消费者转向B和C的比率是相同的。但假设我们有三种麦片，A和B是无糖的，C有糖，则A价格上升时，我们有充分理由相信以前买A的消费者会相对更愿意转向B。</li>
</ul>
<p><strong>一句话总结</strong>：Logit模型下，自价格弹性下价低者利高的假设不合理，且依赖于间接效用中价格的函数形式；跨产品价格弹性下替代效应IIA不合理。</p>
<h4 id="Logit模型IIA问题的逻辑解释"><a href="#Logit模型IIA问题的逻辑解释" class="headerlink" title="Logit模型IIA问题的逻辑解释"></a>Logit模型IIA问题的逻辑解释</h4><p>通过分解间接效用函数为平均效用和随机效用部分，可将消费者选择消费某产品j的原因分解为：要么平均效用$\delta_{jt}$很高，要么是特定消费者冲击（consumer-specific shock）$\mu_{ijt}+\epsilon_{ijt}$很高。在Logit模型下，每个消费者对所有产品有不同的个人偏好排名，但这种不同仅来自于<strong>独立同分布</strong>的特定消费者冲击$\epsilon_{ijt}$。因此，对于原本选择A作为第一偏好产品的消费者而言，其第二选择是B还是C的概率与他是否将A排在第一位无关——他们的第二选择概率与平均大众并无二致。<br>要使那些选A为第一偏好产品的消费者将B排在第二位的概率更高，我们需要在A和B的消费者冲击上建立相关性。这种相关性有两种方式建立：1. 允许$corr(\epsilon_{iAt},\epsilon_{iBt}) !=0$；2. 允许$corr(\mu_{iAt},\mu_{iBt}) !=0$。如果我们可以准确找到相关性，1和2是等价的。</p>
<h4 id="寻找消费者冲击相关性"><a href="#寻找消费者冲击相关性" class="headerlink" title="寻找消费者冲击相关性"></a>寻找消费者冲击相关性</h4><p>从上文所说的相关性建立的两种方式入手，GEV等方法已经尝试了第一种途径。一个例子是nested logit model，该模型将$\epsilon_{ijt}$进一步分解为独立同分布的随机冲击和分组特定冲击（group-specific shock）。不过，如何准确而完整的分组就成了一个问题。而且，虽然该模型有更灵活的替代模式，部分解决了Logit模型下的跨产品弹性问题，但依然没有解决自价格弹性中函数形式依赖问题。<br>另一种简单的想法是为$\epsilon_{ijt}$建立一个无约束协方差矩阵，并对该矩阵进行估计。这又回到了最开始将产品映射到产品特征空间时想要解决的维度过多问题（dimensionality）。<br>本文的想法是，保留$\epsilon_{ijt}$的i.i.d. 一类极值分布假设，而通过$\mu_{ijt}$来找到产品之间的相关性。$\mu_{ijt}$既是产品特征的函数，又是个人特征的函数，而且映射到特征空间后只需估计较少的参数。其他不变，相同特征的产品相关性为1；面对相同产品集，相同个人特征的消费者会有完全一样的产品排名和替代偏好。</p>
<h4 id="BLP模型下的需求价格弹性"><a href="#BLP模型下的需求价格弹性" class="headerlink" title="BLP模型下的需求价格弹性"></a>BLP模型下的需求价格弹性</h4><p>在BLP模型假设下，产品j对产品k的需求价格弹性为：</p>
<script type="math/tex; mode=display">\eta_{jkt} = \frac{\partial{s_{jt}p_{kt}}}{\partial{p_{kt}s_{jt}}} = -\frac{p_{jt}}{s_{jt}}\int \alpha_is_{ijt}(1-s_{ijt})d\hat P^{*}(D)dP^{*}(v), j = k</script><script type="math/tex; mode=display">\eta_{jkt} = \frac{\partial{s_{jt}p_{kt}}}{\partial{p_{kt}s_{jt}}} = \frac{p_{kt}}{s_{jt}}\int \alpha_is_{ijt}s_{ikt}d\hat P^{*}(D)dP^{*}(v), j ! = k</script><p>其中，$s_{ijt}$为市场t中，消费者i购买产品j的概率。</p>
<script type="math/tex; mode=display">s_{ijt} = \frac{exp(\delta_{jt}+\mu_{ijt})}{1+\sum exp(\delta_{kt}+\mu_{ikt})}</script><p>注意积分符号内的第一部分即为Logit模型中的$\frac{\partial{s_{jt}}}{\partial{p_{kt}}}$。这也提示了我们接下来内外两循环的逻辑：先在给定D和v分布的情况下给定个体的D和v，此时价格弹性只与$\epsilon_{ijt}$有关，计算得Logit模型下的需求价格弹性，然后变动个体D和v求和（积分）计算得到所有购买产品j的消费者的总需求价格弹性，最后回到检查D和v的分布假设是否正确的一步上来，重复该循环。</p>
<h4 id="BLP模型需求价格弹性的优缺点"><a href="#BLP模型需求价格弹性的优缺点" class="headerlink" title="BLP模型需求价格弹性的优缺点"></a>BLP模型需求价格弹性的优缺点</h4><p>优点：</p>
<ul>
<li>不依赖于函数形式：BLP下需求价格弹性不由价格进入间接效用函数的形式决定，而是于价格敏感性（或者说收入的边际效用，即$\alpha_i$）</li>
<li>不依赖于市场分割方式（segmentation）：替代方式可以更为灵活</li>
</ul>
<p>缺点：计算量很大，需要合理估计分布。</p>
<h2 id="Estimation"><a href="#Estimation" class="headerlink" title="Estimation"></a>Estimation</h2><h3 id="所需数据"><a href="#所需数据" class="headerlink" title="所需数据"></a>所需数据</h3><p>BLP模型需要的<strong>基本数据</strong>包括：</p>
<ul>
<li>因变量：各产品在各个市场的所占份额</li>
<li>自变量：各产品在各个市场的平均价格，产品特征</li>
<li>人口学特征分布估计：人口调查大样本</li>
<li>其他变量：例如市场营销相关的变量，促销活动，广告支出，以及一些工具变量</li>
</ul>
<p>以上数据最好可以覆盖多个市场。</p>
<h4 id="市场份额数据"><a href="#市场份额数据" class="headerlink" title="市场份额数据"></a>市场份额数据</h4><p>对于市场份额而言，最难确定的是外部物品所占的市场份额，该份额一般由间接法获得，即（市场总体份额-内部物品份额之和）。于是，问题转换为market sizing problem（仿佛在咨询公司面试现场…），对于咨询专家来说可能是很简单的事情，而对于一般人来说，本文作者建议从一个合适的总体入手，然后确定一个合适的比例，最后市场份额 = 总体*比例。例如，对于麦片市场，假设每个人每天需要食用一份麦片，则麦片市场总份额 = 人口数*天数。</p>
<h4 id="加入产品虚拟变量"><a href="#加入产品虚拟变量" class="headerlink" title="加入产品虚拟变量"></a>加入产品虚拟变量</h4><p>尽管我们将产品映射到特征空间是为了减少维度问题，但在样本量很大时，加入产品虚拟变量依然是具有吸引力的。</p>
<h3 id="Identification"><a href="#Identification" class="headerlink" title="Identification"></a>Identification</h3><h4 id="区分Logit与随机系数Logit模型"><a href="#区分Logit与随机系数Logit模型" class="headerlink" title="区分Logit与随机系数Logit模型"></a>区分Logit与随机系数Logit模型</h4><p>Logit和RC Logit模型的区别之一是替代模式。通过观察市场中的真实数据，如果替代效应是IIA的，那就应该属于Logit；而如果B和C的市场份额的相对变化不是恒定不变的话，也许RC才是更好的选择。特别是当新产品进入市场或旧产品退出市场时，如果能观测到别的产品市场份额变动比例的相对值，就能更好地估计RC Logit模型。</p>
<h3 id="估计算法"><a href="#估计算法" class="headerlink" title="估计算法"></a>估计算法</h3><h4 id="为什么不使用最小距离目标函数"><a href="#为什么不使用最小距离目标函数" class="headerlink" title="为什么不使用最小距离目标函数"></a>为什么不使用最小距离目标函数</h4><p>最常用的参数估计目标函数为最小化估计值与真实观测值之间的距离，例如：</p>
<script type="math/tex; mode=display">Min_\theta ||s(x,p,\delta(x,p,\xi;\theta_1);\theta_2 ) - S||</script><p>但是，这种目标函数一方面没有考虑价格和无法观测到的变量之间的内生性，另一方面也将所有参数以非线性形式进入，使得估计过程并不高效。</p>
<h4 id="Berry（1994）估计算法"><a href="#Berry（1994）估计算法" class="headerlink" title="Berry（1994）估计算法"></a>Berry（1994）估计算法</h4><p>Berry(1994)提出的算法比最小距离目标更加适合BLP需求估计。其理论算法如下。<br>设Z为一系列工具变量组成的列向量，$Z = [z_1,…,z_M]$， 又设某个模型下误差项为$\omega(\theta^*)$，其中$\theta^*$为参数的真实值。则根据工具变量定义，有工具变量与误差项不相关，即总体矩：</p>
<script type="math/tex; mode=display">E[z_m\omega(\theta^* )] = 0, m  = 1,2,3,..., M</script><p>由此，参数的GMM估计为：</p>
<script type="math/tex; mode=display">\hat\theta = argmin_\theta \omega(\theta)'Z\Phi^{-1}Z'\omega (\theta)</script><p>其中，$\Phi$为$E(Z’\omega\omega’Z)$的一致估计。<br>该估计方法背后的逻辑可以理解为，如果工具变量数和待估计参数数量一样（$dim(Z) = dim(\theta)$），则我们只需以样本矩$Z’\hat \omega = 0$即可估计参数。但如果工具变量数超过待估计参数，则不存在$\theta$可以使所有样本矩为0，因此我们只能做到使其尽可能接近0（最小化）。通过加权矩阵$\Phi^{-1}$，我们将更小的权重赋予更高方差的要素。</p>
<h4 id="Berry算法与BLP结合"><a href="#Berry算法与BLP结合" class="headerlink" title="Berry算法与BLP结合"></a>Berry算法与BLP结合</h4><p>在BLP模型下，误差项被定义为结构误差$\xi_{jt}$，注意这个误差仅以线性形式进入平均效用$\delta_{jt}$，这使得我们可以优化算法。<br>要得到无法观测到的特征$\xi_{jt}$，由</p>
<script type="math/tex; mode=display">\omega_{jt} = \xi_{jt} = \delta_{jt}-(x_{jt}\beta+\alpha p_{jt})</script><p>知，我们需要平均效用$\delta_{jt}$的参数形式。<br>如何得到平均效用？从模型的需求方程（市场份额对价格及其他变量）入手，给定产品特征和价格，有</p>
<script type="math/tex; mode=display">s_{jt}(\delta_{·t};\theta_2 ) = S_{jt}</script><p>最常见的估计积分形式的$s_{jt}$的方法是多次从对应分布中随机抽取一个样本，计算其对应市场份额值并求和取平均，例如：</p>
<script type="math/tex; mode=display">s_{jt}(x_{·t},p_{·t},\delta_{·t},P_{ns};\theta_2) = \frac{1}{ns}\sum _{i =1}^{ns}s_{ijt}</script><script type="math/tex; mode=display">s_{ijt} = \frac{exp(\delta_{jt}+\sum _{k =1}^Kx_{jt}^k(\Pi D_i+\sigma_k v_i^k ))}{1+\sum _{m=1}^M exp(\delta_{mt}+\sum _{k =1}^Kx_{mt}^k(\Pi D_i+\sigma_k v_i^k ))}</script><p>这里可能比较迷惑，实际上还是假设$\epsilon_ijt$是独立同分布且服从一类极值分布，从而计算出市场t中消费者i购买j的概率$s_{ijt}$，而指数上方的一连串式子只是对应BLP的间接效用函数形式，$v_i^k$以产品特征k为上标是因为本文假设对每个产品特征，消费者都有一个不可观测的随机偏好冲击$v_i^k$，其系数为$\sigma^k$。<br>如果我们可以通过随机模拟得到市场份额的估计值，则我们就可以迭代到对应的平均效用的收敛值（某种高级的数学方法下已经证明该收敛值是平均效用的近似）：</p>
<script type="math/tex; mode=display">\delta_{·t}^{h+1} = \delta_{·t}^h + lnS_{·t} - lns_{·t}(x_{·t},p_{·t},\delta_{·t}^h, P_{ns};\theta_2 )</script><p>由此，我们就可以基于该平均效用的收敛值代入GMM目标函数中估计出相应参数。同时，我们的非线性估计部分只需要估计非线性参数，而线性形式进入的参数可以基于一阶条件和非线性参数值计算得出，使算法得到简化。</p>
<h3 id="工具变量"><a href="#工具变量" class="headerlink" title="工具变量"></a>工具变量</h3><p>Berry（1994）的估计算法最开始就基于一系列外生性工具变量，而价格的内生性也指引我们去寻找工具变量来解决内生性导致的有偏估计问题。</p>
<h4 id="如何寻找工具变量"><a href="#如何寻找工具变量" class="headerlink" title="如何寻找工具变量"></a>如何寻找工具变量</h4><ul>
<li>传统教科书式工具变量：找到cost shifters，即外生地平移成本曲线的变量，这种寻找方式在同质化产品市场是有效的，但在差异化产品市场，我们很少可以完整得到成本数据，而一般这种外生平移变量对每个品牌来说平移效果是不一样的。</li>
<li>假设产品在产品特征空间中的位置是外生的：这一假设往往与市场竞争假设或其他函数形式假设一起使用。例如，使用同公司产的其他具有相同特征的产品的价格之和，或是其他公司产的其他具有相同特征的产品价格之和作为工具变量。这种工具变量会随产品变化而变动，不过，有时该工具变量依然可能是内生的（如果对冲击的响应速度够快）。</li>
<li>利用面板数据的特性：例如，假设随机误差项在城市间独立，但同一城市在不同时间段之间的误差可以存在相关性。这样，同一品牌在其他城市的价格就可以作为有效的工具变量：同一品牌=同一成本=价格具有相关性，但不同城市= 误差项无关=有效工具变量。不过，如果有一些无法观测到的促销行为、广告或者别的冲击可以推测是对所有城市联动的话，这一假设就很难成立了。</li>
</ul>
<p>要找到合适的工具变量，需要将多种工具变量组合的结果进行比较，联系更多的数据，和利用研究者对对应行业的了解。</p>
<h3 id="品牌特定虚拟变量"><a href="#品牌特定虚拟变量" class="headerlink" title="品牌特定虚拟变量"></a>品牌特定虚拟变量</h3><p>在可行范围内，本文作者建议尽可能加入品牌dummies，这是因为加入后这个Dummy就可以控制住随机误差项中随品牌的平均变动，从而提出更纯粹的误差部分。<br>在使用品牌虚拟变量而不使用产品特征时，我们就无法再得到平均效用中各产品特征的系数$\beta$，但这个系数实际上可以从品牌虚拟变量的系数中推断出来。假设d为J*1列向量，存储了J个产品品牌虚拟变量的系数，则品牌J给消费者带来的平均效用增加可以写为：</p>
<script type="math/tex; mode=display">d = X\beta +\xi</script><p>假设$E(\xi|X) = 0$，则由GLS估计，得</p>
<script type="math/tex; mode=display">\hat \beta = (X'V_d^{-1}X)^{-1}XV_d^{-1}\hat d</script>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/22/Pandas包读取文件：编码错误解决方案/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/22/Pandas包读取文件：编码错误解决方案/" class="post-title-link" itemprop="url">Pandas包读取文件：编码错误解决方案</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-22 21:59:05 / Modified: 22:00:03" itemprop="dateCreated datePublished" datetime="2019-05-22T21:59:05+08:00">2019-05-22</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/编程与技术/" itemprop="url" rel="index"><span itemprop="name">编程与技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>尽管现在大部分数据都比较规范，会统一以utf-8存储，但一到中文世界，数据库的编码格式就不一定那么顺利了。在本次帮导师匹配数据库的过程中，因为棘手的编码问题困扰了很久，也费了不少时间，因此在这里做个简单记录，共享该类问题的处理方案。</p>
<h2 id="检查编码"><a href="#检查编码" class="headerlink" title="检查编码"></a>检查编码</h2><p>在Windows环境下，只要不是太大的数据文本文件，都可以用Notepad++打开查看；macOS也可以利用VS Code来推断编码方式。不过，当我们遇到特别大的文件时，这两者就无能为力了。好在利用python的chardet，我们可以得到编码推断：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> chardet</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'文件路径'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    result = chardet.detect(f.read()) <span class="comment"># 或对大文件：readline </span></span><br><span class="line">print(result[encoding])</span><br></pre></td></tr></table></figure></p>
<p>中文数据往往采用ANSI编码，请多尝试<code>encoding = &#39;gbk&#39;/&#39;gb18030&#39;</code>来解码。一般都可以解码成功。</p>
<h2 id="处理解码不成功"><a href="#处理解码不成功" class="headerlink" title="处理解码不成功"></a>处理解码不成功</h2><p>不知道什么原因，我的一部分数据就是解码不出来（其前后都可以），频频报错。如果这类数据比较少，不太重要，可以尝试下面的方法跳过：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f = open(path,<span class="string">'r+'</span>, encoding = encoding, errors = <span class="string">'replace'</span>) <span class="comment">#replace会保留错误行，如果选择直接跳过，设置errors = 'ignore'</span></span><br><span class="line">data = pd.read_csv(f, low_memory = <span class="literal">False</span>, error_bad_lines = <span class="literal">False</span>)</span><br></pre></td></tr></table></figure></p>
<p>完美~</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/21/SCP分析框架/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/21/SCP分析框架/" class="post-title-link" itemprop="url">SCP分析框架</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-21 21:57:32" itemprop="dateCreated datePublished" datetime="2019-05-21T21:57:32+08:00">2019-05-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-05-27 08:45:42" itemprop="dateModified" datetime="2019-05-27T08:45:42+08:00">2019-05-27</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/经济学/" itemprop="url" rel="index"><span itemprop="name">经济学</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="SCP定义"><a href="#SCP定义" class="headerlink" title="SCP定义"></a>SCP定义</h2><p>S： structure，指市场结构，即属于垄断、寡头、垄断竞争还是完全竞争市场，常以市场中的厂商数量衡量。<br>C： conduct，指公司行为（产量竞争/价格竞争）<br>P： performance，指公司行为的结果，衡量标准包括公司利润，消费者福利，厂商福利等<br>SCP分析框架相对轻正式理论，重实证分析，并视市场中的厂商数量会外生地移动行业利润回归曲线。<br>SCP认为，市场结构与公司行为及其结果有因果关系。<br>SCP研究对象：Inter-market research（观察多个不同市场，得到市场结构对公司行为和结果的影响）<br>缺点：会计数据不适用；内生性和双向因果；市场内部的异质性。</p>
<h2 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h2><h3 id="进入壁垒（Entry-Barriers）"><a href="#进入壁垒（Entry-Barriers）" class="headerlink" title="进入壁垒（Entry Barriers）"></a>进入壁垒（Entry Barriers）</h3><p>一般来讲，进入壁垒可以分为以下三类：</p>
<ul>
<li>绝对成本优势（Absolute Cost Advantage）；</li>
<li>规模经济（Economics of Scale）；</li>
<li>产品差异化/消费者忠诚度（Product Differentiation/ Loyalty）</li>
</ul>
<p>对厂商来讲，第一种进入壁垒是最理想的情况：如果一家厂商在每个产量点的边际成本都比其他生产者低，那它<strong>一开始</strong>就可以以每个点的平均成本都最低的绝对优势占领市场；<br>但是现实情况往往没有如此完美。另一种方法是在平均成本上动手脚，通过先发优势占领大部分市场，形成规模经济（MC&lt;AC），以<strong>占领市场后</strong>比其他厂商更低的平均成本维持市场份额；<br>最后一种手段是试图细分市场，走小而精品的路线，这种获得消费者的方式主要是基于一种隐性的转移成本（switching cost）——如果他们要选择别的产品，就要面临自己效用上的损失。<br><img src="media/SCP_distribution.jpg" alt></p>
<h3 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h3><h4 id="衡量表现"><a href="#衡量表现" class="headerlink" title="衡量表现"></a>衡量表现</h4><ul>
<li>Economic rate of return on investment: $\frac{revenue-cost-depreciation}{investment}$</li>
<li>Lerner Index</li>
<li>Tobin’s Q: $Q ratio = \frac{Market Valueof(Equity+Liability)}{TotalAssetBookValue}$</li>
</ul>
<p>注意Tobin’s Q与P/B率的区别：后者分子分母都只考虑Equity value。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/21/Stata命令：将指定路径下所有dta文件合并导出/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/21/Stata命令：将指定路径下所有dta文件合并导出/" class="post-title-link" itemprop="url">Stata命令：将指定路径下所有dta文件合并导出</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-21 17:15:12 / Modified: 19:22:22" itemprop="dateCreated datePublished" datetime="2019-05-21T17:15:12+08:00">2019-05-21</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>下面代码可以将指定路径下所有dta文件合并导出成逗号分隔符的csv文件。<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">clear</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">"指定路径"</span></span><br><span class="line"><span class="keyword">local</span> ff : <span class="keyword">dir</span> . files <span class="string">"*.dta"</span> </span><br><span class="line"><span class="keyword">dis</span> <span class="string">`"`ff'"'</span>  <span class="comment">//显示所有符合条件的dta文件名称</span></span><br><span class="line"><span class="keyword">foreach</span> f of <span class="keyword">local</span> ff&#123;</span><br><span class="line">   <span class="keyword">append</span> using <span class="string">"`f'"</span> </span><br><span class="line">  &#125;</span><br><span class="line">export delimited using <span class="string">"outputpath/fname.csv"</span>, <span class="keyword">replace</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/19/反向传播算法理解与推导/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/19/反向传播算法理解与推导/" class="post-title-link" itemprop="url">反向传播算法理解与推导</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-19 10:17:21" itemprop="dateCreated datePublished" datetime="2019-05-19T10:17:21+08:00">2019-05-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-05-20 17:33:37" itemprop="dateModified" datetime="2019-05-20T17:33:37+08:00">2019-05-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/编程与技术/" itemprop="url" rel="index"><span itemprop="name">编程与技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>业余人士的Coursera学习笔记，有误请见谅，欢迎指正。</p>
<h2 id="反向传播算法"><a href="#反向传播算法" class="headerlink" title="反向传播算法"></a>反向传播算法</h2><h3 id="算法定义，目的与适用场景"><a href="#算法定义，目的与适用场景" class="headerlink" title="算法定义，目的与适用场景"></a>算法定义，目的与适用场景</h3><blockquote>
<p>反向传播算法（backpropagation，缩写BP）是一种与最优化方法（如梯度下降法）结合使用的，用来训练人工神经网络的常见方法。该方法对网络中所有权重计算损失函数的梯度。这个梯度会反馈给最优化方法，用来更新权值以最小化损失函数。——wiki百科</p>
</blockquote>
<h3 id="步骤描述"><a href="#步骤描述" class="headerlink" title="步骤描述"></a>步骤描述</h3><ol>
<li>对每个样本，基于初始权重矩阵$\Theta$正向传播（forward propagation）计算出每层的每个节点$a^{(l)}$，l代表layer层数。</li>
<li>从末尾开始计算$\delta^{(L)}=a^{(L)}-y$，然后反向传播计算出各层次的$\delta^{(l)}=(\Theta^{(l)})^{T}\delta^{(l+ 1)}.*g’(z^{(l)})$。</li>
<li>更新不含正则化部分的梯度：$\Delta^{(l)} := \Delta^{(l)}+\delta^{(l+ 1)}[a^{(l)}]^T $。</li>
<li>得到对每个参数的梯度：$\frac{\partial{J(\Theta)}}{\partial{\Theta_{i j}^{(l)}}} = \frac{1}{m}(\Delta_{i j}^{(l)}+1(j!=0)\lambda\Theta_{i j}^{(l)}$。</li>
<li>基于梯度和J的值，利用优化函数或梯度下降法得到参数的迭代解。</li>
</ol>
<h3 id="我が流通俗理解"><a href="#我が流通俗理解" class="headerlink" title="我が流通俗理解"></a>我が流通俗理解</h3><h4 id="正向传播"><a href="#正向传播" class="headerlink" title="正向传播"></a>正向传播</h4><p>神经网络源于人脑的作用机制，因此在很多方面都可以进行类比。想象神经网络是一个三维空间大厦，每一个样本占领了空间中的一个平面（住进一层），然后在这个平面内经过多个神经元，最终输出结果，并与旁边已经建好的单元大厦接洽，接的越稳，整个楼就建得越好。<br>对某一个样本而言，其所在的神经网络平面往往可以简化为以下模式： input-hidden-output。注意output不一定是一维的，正如input也可以包含多个变量。输出多维向量时一般是multi-classfication问题。<br>因为所有训练都是从input开始，很自然地我们可以将一个传播定义为：输入值（例如$z^{(l)}$）-神经元处理（$g(·)$） -处理输出值($a^{(l)}$)-进入细胞介质，以某种权重（浓度）接入下一层某个节点的输入值（$\Theta^{(l)}$）。这个过程可以帮助我们理解<strong>l</strong>究竟是指哪一层的哪个部分。</p>
<h4 id="反向传播"><a href="#反向传播" class="headerlink" title="反向传播"></a>反向传播</h4><p>直观上，我们可以理解为，某种梯度上的误差$\delta^{(l+1)}$从输入点出发，反向进入介质，以某种权重（浓度）（$\Theta^{(l)}$）传达到上一层的输出点，然后爬一个神经元的坡（$g’(z^{(l)})$），当到达l层的输入点时，误差更新为$\delta^{(l)}$。该误差与（l-1）层的输出值$a^{(l-1)}$网格化交叉相乘后，就得到了经过(l-1)层介质后产生的坡度（随着权重的一点点变化）。<br>由此可见，反向传播，传播的是误差$\delta^{(l)}$，而不是梯度本身，梯度=梯度误差.*走的步长（$a^{(l-1)}$），走的步长在向前传播时就已经确定了。</p>
<h2 id="算法推导"><a href="#算法推导" class="headerlink" title="算法推导"></a>算法推导</h2><p>下面给出比较严谨的数学公式推导，以更严格的理解反向传播的基础原理。</p>
<h3 id="基准计算公式"><a href="#基准计算公式" class="headerlink" title="基准计算公式"></a>基准计算公式</h3><p>整体成本函数：</p>
<script type="math/tex; mode=display">J(\Theta) = -\frac{1}{m}[\sum_{i=1}^{m}\sum_{k=1}^{K}y_k^{(i)}log(h_{\Theta}(x^{(i)})_k+(1-y_k^{(i)})log(1-h_{\Theta}(x^{(i)})]+\frac{\lambda}{2m}\sum_{l=1}^{L-1}\sum_{i=1}^{s_l}\sum_{j=1}^{s_{l+1}}(\Theta_{ij}^{(l)})^2</script><p>这个函数看上去很复杂，但实际背后仅仅是加总<strong>每个</strong>样本的<strong>所有</strong>最终输出值下产生的成本函数以及所有参数的平方和（除bias unit对应的参数），原理与logistic回归是一样的。<br>单样本成本函数：</p>
<script type="math/tex; mode=display">cost^{(i)} = y^{(i)}log(h_{\Theta}(x^{(i)})+(1-y^{(i)})log(1-h_{\Theta}(x^{(i)})</script><p>要计算的梯度：<script type="math/tex">\frac{\partial{J(\Theta)}}{\partial{\Theta}}</script></p>
<h3 id="梯度拆分"><a href="#梯度拆分" class="headerlink" title="梯度拆分"></a>梯度拆分</h3><p>简单起见，我们从单样本下的成本函数入手，并首先讨论最简单的最后输出层到倒数第二层，之后扩展到较复杂的、多对多的中间层情况。</p>
<h4 id="hidden-layer-gt-output-layer"><a href="#hidden-layer-gt-output-layer" class="headerlink" title="hidden layer -&gt; output layer"></a>hidden layer -&gt; output layer</h4><p>注意到成本函数的定义，对样本i，有（以下省略公式上标i）：</p>
<script type="math/tex; mode=display">cost = ylog(a^{(L)})+(1-y)log(1-a^{(L)})</script><p>其中，</p>
<script type="math/tex; mode=display">a^{(L)} = \frac{1}{1+e^{-z^{(L)}}}</script><p>其中，</p>
<script type="math/tex; mode=display">z^{(L)} = \Theta^{(L-1)}a^{(L-1)}</script><p>由于最终梯度函数是线性求和的，因此这一步我们要关注的是获得</p>
<script type="math/tex; mode=display">\frac{\partial{cost}}{\partial{\Theta}} = \Delta</script><p>从L-1层进入L层时，我们经过了权重矩阵$\Theta^{(L-1)}$，由此可以对该矩阵中的每个元素求导。以$\Theta_{12}^{(L-1)}$为例，这个系数是对要得到第一个输出值$y_1$（本例中我们假设只有一个输出值），对L-1层输出值$a_2^{(L-1)}$，即第二个节点需要赋予的权重。<br>则有根据链式法则：</p>
<script type="math/tex; mode=display">\frac{\partial{cost}}{\partial{\Theta_{12}^{(L-1)}}} = \frac{\partial{cost}}{\partial{a^{(L)}}}*\frac{\partial{a^{(L)}}}{\partial{z^{(L)}}}*\frac{\partial{z^{(L)}}}{\partial{\Theta_{12}^{(L-1)}}}</script><p>其中，</p>
<script type="math/tex; mode=display">\frac{\partial{cost}}{\partial{a^{(L)}}} = \frac{y}{a^{(L)}}+\frac{1-y}{1-a^{(L)}} = \frac{y-a^{(L)}}{a^{(L)}(1-a^{(L)})}</script><script type="math/tex; mode=display">\frac{\partial{a^{(L)}}}{\partial{z^{(L)}}} = a^{(L)}(1-a^{(L)})</script><p>注意这一步是经典的Logistic函数求导结果，用a来表示的情况。</p>
<script type="math/tex; mode=display">\frac{\partial{z^{(L)}}}{\partial{\Theta_{12}^{(L-1)}}} = a_2^{(L-1)}</script><p>得到最后的结果：</p>
<script type="math/tex; mode=display">\frac{\partial{cost}}{\partial{\Theta_{12}^{(L-1)}}} = (y-a^{(L)})a_2^{(L-1)} = \delta^{(L)}a_2^{(L-1)}</script><p>这里用了$\delta^{(L)}$的定义，注意符号——我们之前的做法是取了负号，这样就可以跳过-1/m的问题。<br>将所有该层参数的偏导放到一个行向量里（这样如果存在多个输出值，就会形成多个行，即每个元素是成本函数对对应位置的参数求导，也就是说，偏导的结果与权重矩阵形状完全一致，详情参照矩阵求导的定义），得到L-1层的梯度：</p>
<script type="math/tex; mode=display">\Delta^{(L-1)} = \frac{\partial{cost}}{\partial{\Theta^{(L-1)}}} = \delta^{(L)}[a^{(L-1)}]^T</script><h4 id="hidden-layer-gt-hidden-layer"><a href="#hidden-layer-gt-hidden-layer" class="headerlink" title="hidden layer -&gt; hidden layer"></a>hidden layer -&gt; hidden layer</h4><p>矩阵求导是较为高阶的知识，因此这里依然从标量入手推导，有时间的话之后补充矩阵直接推导。<br>Notation: $\Theta_{ij}^{(l-1)}$为对应（l-1）层第i个输出值$a_i^{(l-1)}$与l层第j个输入值$z_j^{(l)}$的权重参数。这里我们依然只看单个样本，因此省略了样本序数的表示。由此，我们有关注的偏导对象：</p>
<script type="math/tex; mode=display">\frac{\partial{cost}}{\partial{\Theta_{ij}^{(l-1)}}}=\frac{\partial{cost}}{\partial{z_j^{(l)}}}*\frac{\partial{z_j^{(l)}}}{\partial{\Theta_{ij}^{(l-1)}}}</script><p>其中，由$z_j^{(l)} = \Theta_j^{(l-1)}a^{(l-1)}$的定义知（为简洁，此处以矩阵形式表示该方程），</p>
<script type="math/tex; mode=display">\frac{\partial{z_j^{(l)}}}{\partial{\Theta_{ij}^{(l-1)}}} = a_i^{(l-1)}</script><p>接下来的计算重点就落在$\frac{\partial{cost}}{\partial{z_j^{(l)}}}$上，注意到这个式子也是我们对$\delta_j^{(l)}$的定义。<br>现在我们需要从（l+1）层来获得上式的值，因为</p>
<script type="math/tex; mode=display">\frac{\partial{cost}}{\partial{z_j^{(l)}}}=\sum_{k=1}^{K}\frac{\partial{cost}}{\partial{z_k^{(l+1)}}}*\frac{\partial{z_k^{(l+1)}}}{\partial{z_j^{(l)}}}</script><p>其中，k表示l+1层第k个输入值，l+1层总共有K个输入值。<br>（回顾一下：l层是j-J个，l-1层是i-I个）<br>根据$\delta$的定义，代入上式得$\frac{\partial{cost}}{\partial{z_k^{(l+1)}}} = \delta_k^{(l+1 )}$，</p>
<p>而$z_k^{(l+1)} = \Theta_{jk}^{(l)}a_j^{(l)} =  \Theta_{kj}^{(l)}g(z_j^{(l)})$，</p>
<p>故$\frac{\partial{z_k^{(l+1)}}}{\partial{z_j^{(l)}}} =\Theta_{kj}^{(l)}g’(z_j^{(l)})$。<br>整合上面所有公式，得到</p>
<script type="math/tex; mode=display">\frac{\partial{cost}}{\partial{z_j^{(l)}}}=\sum_{k=1}^{K}\delta_k^{(l+1)}\Theta_{kj}^{(l)}g'(z_j^{(l)}) = g'(z_j^{(l)}).*[\Theta_{j}^{(l)}]^T\delta^{(l+1 )}</script><p>将l层中的J个节点对应的误差纵向堆叠整合成一个误差列向量：</p>
<script type="math/tex; mode=display">\delta^{(l)} = g'(z^{(l)}).*[(\Theta^{(l)})^T\delta^{(l+1)}]</script><p>最后整理成l-1层的梯度矩阵：</p>
<script type="math/tex; mode=display">\frac{\partial{cost}}{\partial{\Theta^{(l-1)}}} = \Delta^{(l-1)} = \delta^{(l)}[a^{(l-1)}]^T</script>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/17/Pandas读取ANSI编码的CSV文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/17/Pandas读取ANSI编码的CSV文件/" class="post-title-link" itemprop="url">Pandas读取ANSI编码的CSV文件</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-17 17:45:20" itemprop="dateCreated datePublished" datetime="2019-05-17T17:45:20+08:00">2019-05-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-05-20 17:33:24" itemprop="dateModified" datetime="2019-05-20T17:33:24+08:00">2019-05-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/编程与技术/" itemprop="url" rel="index"><span itemprop="name">编程与技术</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近帮导师处理大量数据文件，由于win本配置太低就想把Access数据库全导出成csv格式文件再换设备处理，但在读取csv文件时发现无法以utf-8格式解码，用Notepad++打开发现编码格式是GB2312，也就是ANSI编码（简体中文的锅），几经搜索终于得到正确的解码姿势：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For windows</span></span><br><span class="line">data = pd.read_csv(filepath, encoding = <span class="string">'gbk'</span>)</span><br><span class="line"><span class="comment"># For macOS</span></span><br><span class="line">data = pd.read_csv(filepath, encoding = <span class="string">'GB18030'</span>)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/16/Econ Espresso 19M5W3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/16/Econ Espresso 19M5W3/" class="post-title-link" itemprop="url">Econ Espresso 19M5W3</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-16 08:58:08" itemprop="dateCreated datePublished" datetime="2019-05-16T08:58:08+08:00">2019-05-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-05-20 17:32:51" itemprop="dateModified" datetime="2019-05-20T17:32:51+08:00">2019-05-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/时事简报/" itemprop="url" rel="index"><span itemprop="name">时事简报</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="The-Guardian"><a href="#The-Guardian" class="headerlink" title="The Guardian"></a>The Guardian</h2><h3 id="英国央行副主管称延迟退欧将损害长期经济前景"><a href="#英国央行副主管称延迟退欧将损害长期经济前景" class="headerlink" title="英国央行副主管称延迟退欧将损害长期经济前景"></a>英国央行副主管称延迟退欧将损害长期经济前景</h3><p>英国央行deputy governor Ben Broadbent（元高盛银行家）称继续延迟退欧并非好事，公司正在等待确定性消息的到来，而这个等待的过程如此漫长，企业投资因谨慎而迟迟不能展开。<br>他认为，当完全宣布结果后，企业投资会强劲反弹——那些未被取消的投资项目将安然进行。</p>
<blockquote>
<p>If, as a business person, you’re assured that the worst thing is suddenly off the table, that has quite a powerful effect on your incentive to invest.”</p>
</blockquote>
<h2 id="WSJ-City"><a href="#WSJ-City" class="headerlink" title="WSJ City"></a>WSJ City</h2><h3 id="麦当劳发展手机点餐服务"><a href="#麦当劳发展手机点餐服务" class="headerlink" title="麦当劳发展手机点餐服务"></a>麦当劳发展手机点餐服务</h3><p>麦当劳想让手机点餐体验和亚马逊一样，同时智能对“点什么”提出建议（拯救选择困难症啊）<br>相比于其竞争者，麦当劳在数字化方面已经落后一步。</p>
<h2 id="史丹利百得准备转移工厂"><a href="#史丹利百得准备转移工厂" class="headerlink" title="史丹利百得准备转移工厂"></a>史丹利百得准备转移工厂</h2><p>受贸易战影响，Stanley Black &amp; Decker（500强美国五金公司）准备将五金工厂从中国迁回美国。</p>
<h3 id="迪士尼获得Hulu完全掌控权"><a href="#迪士尼获得Hulu完全掌控权" class="headerlink" title="迪士尼获得Hulu完全掌控权"></a>迪士尼获得Hulu完全掌控权</h3><p>迪士尼与Comcast达成协议，将Hulu的营运控制权转交迪士尼，Comcast最早可以在2024年1月将手中持有的1/3股权以当时市场价卖给迪士尼（现持有2/3），迪士尼承诺在该交易发生时所有者权益价值不低于27.5b美元。这一交易展示了迪士尼在发展自己的直接面向消费者播放流服务（direct-to-consumer streaming service）战略上的雄心（Disney+）。Hulu有超过25m的订阅用户，并且在过去一年大幅增长。</p>
<h3 id="S-amp-P500-CEO薪资"><a href="#S-amp-P500-CEO薪资" class="headerlink" title="S&amp;P500 CEO薪资"></a>S&amp;P500 CEO薪资</h3><p>2018年，S&amp;P500公司中CEO薪资中位数为12.4m美元。大多数top earners属于healthcare, media和financial comp. 与往年不同，tech公司老板们在top25中仅占3席。<br>有意思的是，20家女老板的薪资中位数为13.7m美元，超过男性。<br>Best return top25中，tech公司占有10位。最低收益率的公司中带头者是GE和制药公司Perrigo。</p>
<h3 id="S-amp-P-500-大量回购股票"><a href="#S-amp-P-500-大量回购股票" class="headerlink" title="S&amp;P 500 大量回购股票"></a>S&amp;P 500 大量回购股票</h3><p>美国公司在2019年Q1回购股票总额达1998年以来第二高——180bn。第一高为2018年Q4。2018年回购最多的公司为Apple, Oracle和Cisco Systems，总额达到126bn。<br><strong>回购困境（buyback dilemma）</strong>：当市场急速下落时，公司可能想在手上保留更多的现金，但同时熊市中公司股票变得更便宜，所以它们又往往把现金用来回购股票。一些分析师认为这样做能稳固市场，帮助从熊市中走出。股票回购助力了最近十年的牛市。但另一方面，如果收购是源自更广意义上的经济问题的话，那可能就是另一回事了。</p>
<blockquote>
<p>Companies will do a lot to avoid cutting or suspending a dividend, so if prospects deteriorate, buybacks are the first thing they take away.——Ed Clissold, chief US strategist at Ned Davis Research Group</p>
</blockquote>
<h3 id="经济学家认为贸易关税不会过于影响美国通胀"><a href="#经济学家认为贸易关税不会过于影响美国通胀" class="headerlink" title="经济学家认为贸易关税不会过于影响美国通胀"></a>经济学家认为贸易关税不会过于影响美国通胀</h3><p>新关税为政府带来每年30bn美元的收入——当然，以消费者受损为代价。关税与fed决策息息相关，因美联储长期以2%通胀率为目标。但经济学家估计关税并不会过分影响通胀（消费者在服务而非物品上消费的多），另一方面即使通胀上升，央行也未必会调升利率，目前决策者更关注通胀长期走低的问题而非暂时走高的可能性。</p>
<h2 id="日经中文网"><a href="#日经中文网" class="headerlink" title="日经中文网"></a>日经中文网</h2><h3 id="中美贸易战下物价变动"><a href="#中美贸易战下物价变动" class="headerlink" title="中美贸易战下物价变动"></a>中美贸易战下物价变动</h3><p>一般认为关税提高会推高进口物价并刺激通胀（外部输入型），但美国似乎并没有受损。</p>
<blockquote>
<p>美国消费者物价保持稳定。2019年4月比上年同月提高2.0％。虽然油价走低的影响减弱，物价略微上升，但低于第1轮对华惩罚性关税启动之前（2018年6月的2.9％）。</p>
</blockquote>
<p><img src="media/15577058352862/15578322657971.jpg" alt><br>另一方面，中国的生产者物价变动剧烈，2018年6月之后迅速下降，此间汇率并没有太大变化。虽说物价受很多因素影响，但在美国看不到来自中国的进口商品销售价格因关税而被推高的情况，反而感受到中国企业下调出口价格的可能性。<br>结合世界银行和美国贸易代表办公室（USTR）的数据进行调查，成为美国前三轮加征关税对象中，约7成“价格弹性”超过1，“不易上涨”。<em>“价格弹性”如果超过1，则涨价容易导致需求下降，可视为“不易出现价格上升”。替代品能轻易找到的低附加值产品等属于这种情况。</em><br>EconPol Europe进行了推算。针对对象品类，美国的消费者物价仅提高4.5％，另一方面，中国的生产者物价将下降20.5％。实际上中国企业承担了关税负担的约8成。<br>美国政府在前三轮加征关税中避免难以用他国商品代替的产品，在战略上选择了额外关税的品类。<br>注：即使需求弹性很大，关键在于其他国家企业的供给是否能跟进，如果产能跟不上，相关替代品是否能轻易找到呢。比如目前鸡肉对猪肉的替代效应就是有限的。也就是说供给弹性？<br>再往下阅读，的确是这样哈哈哈。。</p>
<blockquote>
<p>如果美国启动第4轮惩罚性关税，EconPol Europe的Benedikt Zoller-Rydzek表示：包括美国苹果的“iPhone”等在内，“难以找到中国以外供应企业的电子产品等也将成为对象，对美国物价和经济的打击将变得巨大”。物价上涨将导致实际收入缩水，挤压经济，另一方面，美国联邦储备委员会（FRB）也将难以维持“鸽派”姿态，股市将失去支撑因素。</p>
</blockquote>
<h2 id="The-Economist"><a href="#The-Economist" class="headerlink" title="The Economist"></a>The Economist</h2><h3 id="数字化如何铸就地产大亨"><a href="#数字化如何铸就地产大亨" class="headerlink" title="数字化如何铸就地产大亨"></a>数字化如何铸就地产大亨</h3><p>工业REITs发展势头迅猛。过去三年，工业REITs复合年化收益率几近20%（而本地购物商城REITs几乎每年亏损6%）。起源于新加坡的REIT GLP不到五年前进入美国市场，而现在它已经即将以20bn估值IPO它的美国运营部门。<br>一部分原因：电商巨头或是零售转电商的巨头追求快速物流，仓库搬得离大城市中心越来越近；云计算服务等高科技公司租赁大量场地作为数据仓库或是放置维护服务器的地方；手机等服务提供商则要建基站——密集分布的5G基础设施，而且离城市越近越好，尽可能让信号遍布每一个角落。**</p>
<h3 id="欧洲股票平静水面下的极端分裂"><a href="#欧洲股票平静水面下的极端分裂" class="headerlink" title="欧洲股票平静水面下的极端分裂"></a>欧洲股票平静水面下的极端分裂</h3><p>与美国股市相比，欧洲股市主要由价值股（value stocks，如Daimler，PE=8）和质量股（quality stocks，如Nestle，PE=29）组成，而缺少本土巨头崛起产生的增长股（growth stocks，如Google）。在相对平静的股票指数之下，价值股和质量股之间的鸿沟却越来越不可逾越。<br>在欧洲，质量股受到欢迎，而美国则以增长型股票为追逐的热点。<br>价值股指的是被低估、价格便宜的股票，在过去它们往往是周期性股票，而现在则主要集中在工业，例如汽车制造商和传统银行。质量股则因为稳定而受欢迎，包括稳定的净利润、高资本收益率、合理的债务和低员工周转率。在欧洲，这类公司主要是处于消费行业的著名公司。<br>两种股票之间的巨大鸿沟推进了消极投资的盛行：An investor in a low-cost index fund can own both types of stock without worrying too much about relative value. 也因此，很多来自美国的主动型投资人都退出了欧洲市场：价值股看上去没什么希望，质量股又太贵。<br>与伦敦房地产市场对比：你可以在市中心高层杀出一条血路但没准就踩在了高点，也可以选择在荒郊野外买一处说不定哪天会升值的房地产，不过最安全的还是在市郊接壤处买一套漂亮的洋房，这洋房可能不算便宜，但至少不会变得更便宜。</p>
<h3 id="特朗普进一步打击华为"><a href="#特朗普进一步打击华为" class="headerlink" title="特朗普进一步打击华为"></a>特朗普进一步打击华为</h3><p>早在2012年，华为就已经被禁止在美国销售设备。大型美国移动运营商也完全禁止引入华为的5G网络技术。美国一直在暗示其盟友采取相同手段，不过目前为止应和的只有澳大利亚。2019年5月15日，特朗普针对华为，商务部调查认定华为涉及威胁国家安全，认定生效时（时期未定），华为的附属公司将被禁止在没有政府批准的情况下向美国公司购买硬软件。<br>2018年4月，中兴曾遭遇完全相同的境地，2017年净利润4.6bn人民币的ZTE2018年净损失7bn人民币，濒临破产边缘，最后靠xi个人与特朗普联系才获得缓刑。</p>
<h3 id="硅谷的睡眠科技"><a href="#硅谷的睡眠科技" class="headerlink" title="硅谷的睡眠科技"></a>硅谷的睡眠科技</h3><p>睡眠科技或许是下一轮的“健康追踪技术”——一开始并没有人相信有用，但现在社交网站上遍布的锻炼记录分享已经是见怪不怪了。至少，它是迈向“量化自我”的一步，可以在一定程度上帮助改善睡眠缺乏（而非失眠症状）。<br>电子毛毯、调温床单、声音设备、智能铃声、智能枕头、睡眠追踪手表手环、智能睡眠眼罩、大脑刺激头带、床边睡眠感应器和无数的睡眠监控app共同构成了庞大的睡眠科技市场。根据市场研究公司报告，该市场2014年价值58bn美元，并预计在2020年增长至81bn美元。</p>
<h3 id="经济学家重新审视财政政策"><a href="#经济学家重新审视财政政策" class="headerlink" title="经济学家重新审视财政政策"></a>经济学家重新审视财政政策</h3><p>目前，美国国债占GDP78%。如果不增税或控制支出，预计2029年会达到GDP的92%，1947年以来的最高值。<br>公共债务的传统理论受到挑战，比如，经济理论认为公共债务对私人投资存在挤出效应，但当公司有大量现金和极低借债成本时，这种说法未必令人信服。<br>现在我们正处于利率史低且短时间内预计不会反弹的时期，因此，即使债务占GDP的比重稳步上升，每年付息额却基本接近历史均值。<br><img src="media/15577058352862/15581419005030.jpg" alt></p>
<p>最重要的是，现在的利率甚至低于名义利率——这意味着随着时间推移，债务会缩水，只要经济体增长超过该利率，政府就可以永远保有少量的赤字状况。<br>这一现象有一些反直觉，一般认为在长期中预算应保持平衡。但经济学家Blanchard指出，美国名义增长速度超过政府债券利率的现象在历史上十分常见。低利率表明风险调整资本收益率（即额外私人投资所得）很低，因此，即使公共部门投资错配，对社会福利的影响也是很微小的。<br>哈佛大学经济学家Mr Furman和Mr Summers指出，对公共部门会挤出私人投资的恐惧源自“对当今经济问题的荒唐诊断”。真正的问题在于美国的利率已经非常低，并且可能再次跌回零利率，到那时美联储将无法再降低利率。如今，任何想要削减债务或政府赤字的做法都可能拖累经济，使上述假想成为可能。Summers认为从19世纪70年代开始赤字就一直在支撑利率上行，试图削减赤字可能使利率显著下降。<br>2017年，Mr Elmendorf and Louise Sheiner 在JEP上论述道，过量储蓄和资本回报率下降使政府债务没有看上去那么有害。<br>现在MMT正在兴起（Modern Monetary Theory，现代货币理论）。这一前沿经济学说认为，债务GDP比（debt-to-GDP ratio）对那些以本国货币发行国债的国家来说无关紧要，且唯一约束支出的是通货膨胀。在通货膨胀率极低的现在，正是增加在促进平等和改善气候变化方面支出的好机会。<br>不过，这一理论只获得了很少一部分主流经济学家的支持。</p>
<h2 id="The-Economist-Espresso"><a href="#The-Economist-Espresso" class="headerlink" title="The Economist Espresso"></a>The Economist Espresso</h2><h3 id="特朗普推迟对欧日征税"><a href="#特朗普推迟对欧日征税" class="headerlink" title="特朗普推迟对欧日征税"></a>特朗普推迟对欧日征税</h3><p>特朗普决定将对欧盟和日本的汽车及零部件的关税征收推迟六个月。显然在与中国准备贸易战的同时他并不想和所有盟友也打个全面的贸易战。市场受到鼓舞。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://v-swye.github.io/kanaeba/kanaeba/2019/05/16/Econ Espresso 19M5W2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanaeba">
      <meta itemprop="description" content="如果生活要求你百般武艺，那就尽力做到样样精通。">
      <meta itemprop="image" content="/kanaeba/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kanaeba's Long Position">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/kanaeba/2019/05/16/Econ Espresso 19M5W2/" class="post-title-link" itemprop="url">Econ Espresso 19M5W2</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-16 08:55:08" itemprop="dateCreated datePublished" datetime="2019-05-16T08:55:08+08:00">2019-05-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-05-20 17:32:36" itemprop="dateModified" datetime="2019-05-20T17:32:36+08:00">2019-05-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/kanaeba/categories/时事简报/" itemprop="url" rel="index"><span itemprop="name">时事简报</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Econ-Espresso-19M5W2"><a href="#Econ-Espresso-19M5W2" class="headerlink" title="Econ Espresso 19M5W2"></a>Econ Espresso 19M5W2</h1><h2 id="Economist-Espresso"><a href="#Economist-Espresso" class="headerlink" title="Economist Espresso"></a>Economist Espresso</h2><h3 id="宜家在法国探索新业务模式"><a href="#宜家在法国探索新业务模式" class="headerlink" title="宜家在法国探索新业务模式"></a>宜家在法国探索新业务模式</h3><p>宜家在5月6日于法国巴黎中心开了第一家店，店铺规模是目前所有宜家店面里最小的，而且会主要销售更小的产品——以与当代住在城市小房子里的年轻人需求匹配。宜家一般将仓库放在郊外，而年轻人既没有时间也没有车可以开去郊外的仓库取货。<br>同时，宜家在伦敦，莫斯科，纽约和悉尼开展“panning studios”，提供一对一咨询，帮助客户设计他们的房子。宜家也在筹备在30个国家开展家具出租业务，保护环境。（<em>感觉很适合国内租房的年轻人——如果同时提供家具运输的话，那么搬新家就不用搬掉所有的家具了，还可以换新</em>）<br>2018年宜家利润下跌40%。</p>
<h2 id="The-Economist"><a href="#The-Economist" class="headerlink" title="The Economist"></a>The Economist</h2><h3 id="英国的追随力（followership）问题"><a href="#英国的追随力（followership）问题" class="headerlink" title="英国的追随力（followership）问题"></a>英国的追随力（followership）问题</h3><blockquote>
<p>“I don’t know why people are so fixated on the subject of leadership,” he said, or words to that effect. “What we really need to think about is followership.”</p>
</blockquote>
<p>获得公民支持的三个要点：deference（顺从），支持者认为领导人是优秀的；class-loyalty（阶级忠诚），支持者为代表自己的领导者投票；competence（能力），支持是因为认为领导人可以解决问题。随着精英政治的衰败，问题凸显。<br>当代，唯一能重建领导人与追随者之间的纽带的方法是恢复当权者在能力方面的声誉。不过梅姨看来是比较失败的。但更黑暗的事实是：一段时间内，the politics of resentment will trump the politics of problem-solving for some time.</p>
<h3 id="美国警察部门为911报警电话配备社会工作者"><a href="#美国警察部门为911报警电话配备社会工作者" class="headerlink" title="美国警察部门为911报警电话配备社会工作者"></a>美国警察部门为911报警电话配备社会工作者</h3><p>近十年来，纽约市报警电话中涉及精神病的案件数量几乎翻倍。根据研究，1/4因报警而最后被警察射杀的案件涉及精神病，而大部分警察并不知道怎么正确处理精神病人。因此，部分州已经开始引入合作团队——警察+心理治疗师。不过，警察一般比较排外，所以这些心理治疗师要融入进去并不容易，而且由于时间较短实施州不多，还无法进行有效的成本-利益的分析。</p>
<h3 id="Lyft收益翻倍却亏损5倍，前景灰暗"><a href="#Lyft收益翻倍却亏损5倍，前景灰暗" class="headerlink" title="Lyft收益翻倍却亏损5倍，前景灰暗"></a>Lyft收益翻倍却亏损5倍，前景灰暗</h3><p>2019.3.29，Lyft成为第一个叫车行业的上市公司，上市当日股价上涨9%。然而，5月7日一季度财报公开后，股价次日暴跌11%。<br>一季度收益776m美元，同比翻倍，然而亏损1.14b，超过2018年全年亏损。亏损的主要来源是雇员补贴计划——CFO认为2019会是亏损峰年，之后会平缓过度到盈利状态。但是，即使去掉这部分，销售、市场营销和保险的成本都在上升。调整营业亏损230m显示过去一年该公司在成本控制上并没有什么进步。而在top-line growth方面，Lyft预计二季度销售增长率会显著下降。<br>更令投资者忧心的应该是即将在5月10日上市的Uber。Uber的市值将会是Lyft的数倍，但它的亏损额也会更大。Uber未经审计的一季度财报显示亏损1b——从2009年成立以来共计亏损9b。<br>两家公司目前都还有足够的资金支持运转，但要想转亏为盈，要么提价（不太可能，Bertrand），要么减少司机补贴（但两家平台的司机已经经常在抱怨工资不够cover生活必需）。因此，两公司现在都在探索研发无人驾驶技术。<br>update: 5月9日，uber遭遇美国、英国和澳洲（澳洲同时包括lyft）司机游行，要求更好的Pay和conditions。</p>
<h3 id="退欧如何影响英国FDI？"><a href="#退欧如何影响英国FDI？" class="headerlink" title="退欧如何影响英国FDI？"></a>退欧如何影响英国FDI？</h3><p>留欧派指责退欧使日本汽车制造商、美国的银行及其他公司取消投资计划；但退欧派则认为英国比过去更受欢迎：上个月EY投资者吸引力国家排名中，英国列首位；这周Facebook更是选择了伦敦作为WhatsApp发展计划的大本营。<br>国家之间互相竞争FDI：一方面，海外公司进入国内市场可以提升市场竞争，有利于消费者；另一方面，海外国家如果能收购本土业务，则通常可以提升本土公司的生产率，从而提高公司。<br>1995-2015年十年间，英国吸引了全球跨境并购交易的10%。从2016年退欧公投以来，这个比率并未受多大影响，巴菲特最近还告诉FT他“准备在英国买点什么”。英国有着较低的公司税和稳定的法制体系。<br>不过，在某些行业，FDI的热情已经在消退。2014-2017年英国是美国科技公司最喜欢的跨境并购交易目的地，但2018年英国已落至第八位。uk Trade Policy Observatory at Sussex University的反事实研究表明，相比留欧，退欧减少了1/5的inward FDI。<br>退欧也影响了国内公司。1月巴克莱获得准许转移$213bn资产到都柏林，因其担忧没有交易可做。LSE研究发现退欧投票导致了英国公司向EU其他国家的投资增加了12%，而这些资本原本可以被用在国内。</p>
<blockquote>
<p>FDI remains strong, but it would be stronger minus Brexit. And Britain has not even left yet.</p>
</blockquote>
<h2 id="WSJ-City"><a href="#WSJ-City" class="headerlink" title="WSJ City"></a>WSJ City</h2><h3 id="特斯拉创立自品牌保险项目"><a href="#特斯拉创立自品牌保险项目" class="headerlink" title="特斯拉创立自品牌保险项目"></a>特斯拉创立自品牌保险项目</h3><p>特斯拉拥有自己产品更好的数据，可以以更低成本提供保险服务。<br>汽车保险服务行业正在发生巨大变化：随着自动驾驶技术发展，传统汽车事故率会下降，汽车保险提供商的premium下降，利润会受损。特斯拉提供了一个新的方向——lower cost。</p>
<h3 id="Uber-IPO不顺"><a href="#Uber-IPO不顺" class="headerlink" title="Uber IPO不顺"></a>Uber IPO不顺</h3><p>IPO price$45，or 估值82b，但开始交易后开盘价下滑到$42,这对科技股IPO来说很少见，主要原因包括最近该公司负面消息较多，估值预期下降，以及因为贸易战整个故事不振。</p>
<h3 id="San-Francisco提出增加IPO税"><a href="#San-Francisco提出增加IPO税" class="headerlink" title="San Francisco提出增加IPO税"></a>San Francisco提出增加IPO税</h3><p>SF领导者计划将科技公司IPO税增加三倍，以解决该州日益增长的贫富不均矛盾。最近硅谷正接受调查，因最近加州遭遇房地产危机，很多人认为主要原因是科技部门就业和收入快速增长。</p>
<h3 id="法国加强国际科技公司监控"><a href="#法国加强国际科技公司监控" class="headerlink" title="法国加强国际科技公司监控"></a>法国加强国际科技公司监控</h3><p>法国政府计划授予监管机构审计和向大型社交媒体公司罚款的权力，如果他们没有充分去除不适宜的（hateful）内容的话。</p>
<h3 id="新ESG基金上市交易，表现优异"><a href="#新ESG基金上市交易，表现优异" class="headerlink" title="新ESG基金上市交易，表现优异"></a>新ESG基金上市交易，表现优异</h3><p>BlackRock’s iShares ESG MSCI USA Leaders基金周四开始交易，可能是历史上最成功的基金发行，首日发行融资851m。今年以来，基于环境、社会和治理模块的ETF已经融资1.9bn。人们认为年轻的投资者会格外重视可持续战略。The BlackRock ETF fits into a small but increasingly crowded corner of the market devoted to responsible investing. 过去这方面的ETF增长很慢，但现在情况有所转变。</p>
<h2 id="日经中文网"><a href="#日经中文网" class="headerlink" title="日经中文网"></a>日经中文网</h2><h3 id="日本少子化进程持续"><a href="#日本少子化进程持续" class="headerlink" title="日本少子化进程持续"></a>日本少子化进程持续</h3><p>日本总务省5.4公布儿童人口推算数据显示，日本儿童人口数量连续38年出现减少。各都道府县只有东京儿童人口增加8000，冲绳持平，其他45个全部下降。</p>
<h2 id="FT中文网"><a href="#FT中文网" class="headerlink" title="FT中文网"></a>FT中文网</h2><h3 id="美中贸易僵局中的石油行业"><a href="#美中贸易僵局中的石油行业" class="headerlink" title="美中贸易僵局中的石油行业"></a>美中贸易僵局中的石油行业</h3><p>两周前，特朗普政府宣布取消对伊朗石油买家的一切制裁豁免，导致原油价格飙升。地缘政治威胁是看涨的主要原因。<br>要想回到石油低价，从最大买家中国入手似乎是个不错的选择——周一原油价格与股市齐跌，布伦特原油一度跌至每桶70美元以下。<br>美国+中国在石油市场占有量将近1/3。<br>随着贸易战加剧，中国大幅削减从美国的能源进口，两年前每日超43万桶，现在不足10万桶。<br>如果仅仅将对华原油出口恢复到一年多以前的水平，就能增加约120亿美元的对华贸易额，再加上液化天然气供应，可大幅改善美国贸易赤字情况。短期美国相信其石油行业有其他海外市场，不过长远看与中国切断联系将有损其不断扩大的页岩油行业。</p>
<h3 id="中国科技巨擘获得香港数字银行牌照"><a href="#中国科技巨擘获得香港数字银行牌照" class="headerlink" title="中国科技巨擘获得香港数字银行牌照"></a>中国科技巨擘获得香港数字银行牌照</h3><p>腾讯(Tencent)和阿里巴巴(Alibaba)获得香港金融管理局(HKMA)颁发的银行牌照，同时获得牌照的还有世界第四大智能手机制造商小米(Xiaomi)和世界最大保险公司平安(Ping An)。它们将向金融业发起各方等待已久的进军，威胁汇丰(HSBC)和渣打(Standard Chartered)等香港银行。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Kanaeba</p>
              <div class="site-description motion-element" itemprop="description">如果生活要求你百般武艺，那就尽力做到样样精通。</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/kanaeba/archives/">
                
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/kanaeba/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/kanaeba/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kanaeba</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/kanaeba/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/kanaeba/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/kanaeba/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/kanaeba/js/utils.js?v=7.1.1"></script>

  <script src="/kanaeba/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/kanaeba/js/affix.js?v=7.1.1"></script>

  <script src="/kanaeba/js/schemes/pisces.js?v=7.1.1"></script>



  

  


  <script src="/kanaeba/js/next-boot.js?v=7.1.1"></script>


  

  

  

  



  




  

  

  
  

  
  
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
